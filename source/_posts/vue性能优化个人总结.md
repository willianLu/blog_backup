---
title: vue性能优化个人总结
date: 2021-03-13 13:00
comments: true
tags:
    - vue
---

本人从事前端的这几年，使用最多的前端流行框架就是vue，项目中多少会涉及到需要优化的地方，根据个人经验及参考相关资料，做一些简单的总结。
由于本人技术水平有限，如果有所错误或缺少重要点，还望指出，谢谢。
<!-- more -->
#### 相关优化
1. 路由使用懒加载，异步加载组件，可以减少首屏加载时间（根据项目而定，如果只是简单的活动页面倒是没必要使用）。
2. 使用keepAlive，缓存组件，即可以保持这些组件的状态，又避免反复重渲染导致的性能问题，注意并非所有组件都需要缓存，根据项目情况而定。
3. 永远不要把 v-if 和 v-for 同时用在同一个元素上（[官网特意强调](https://cn.vuejs.org/v2/style-guide/#%E9%81%BF%E5%85%8D-v-if-%E5%92%8C-v-for-%E7%94%A8%E5%9C%A8%E4%B8%80%E8%B5%B7%E5%BF%85%E8%A6%81)）。
4. 合理使用v-if和v-show。一般来说，v-if 有更高的切换开销，而 v-show 有更高的初始渲染开销。因此，如果需要非常频繁地切换，则使用 v-show 较好；如果在运行时条件很少改变，则使用 v-if 较好。
5. 合理使用key。key是特殊的属性，主要用于Vue虚拟DOM算法中新旧vNode的对比。使用正确的key，可以在元素节点变化时，迅速感知，减少diff算法时间。
6. 合理使用functional组件，减少渲染代价。
7. 合理定义data数据，对于不需要响应式的数据，可以不定义在data内，或大量数据时使用Object.freeze冻结数据，避免处理响应式的性能消耗。
8. 取值使用局部变量，莫要大量使用this.key的方式，通过缓存可以减少触发响应式的getter方法。
9. 对于长列表可以使用虚拟滚轮，减少页面渲染dom数量；对于点击事件可以使用事件委托，减少事件注册量。
10. computed和watch的使用区分。
    > computed: 计算属性，依赖其它属性值，并且 computed 的值有缓存，只有它依赖的属性值发生改变，下一次获取 computed 的值时才会重新计算 computed 的值；
    > watch: 当需要在数据变化时执行异步或开销较大的操作时，这个方式是最有用的。
11. 组件内自定义的监听事件，在组件销毁时需手动移除事件监听，避免内存泄露。
12. 图片懒加载，第三方库按需引入等。